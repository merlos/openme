<Window x:Class="openme_windows.Views.ImportProfileWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="openme â€” Import Profile"
        Width="500" Height="480"
        MinWidth="420" MinHeight="380"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize">

    <DockPanel Margin="20">

        <!-- Header -->
        <TextBlock DockPanel.Dock="Top"
                   Text="Import Profile"
                   FontSize="18" FontWeight="SemiBold"
                   Margin="0,0,0,6"/>

        <TextBlock DockPanel.Dock="Top"
                   TextWrapping="Wrap" Foreground="#555555" FontSize="12"
                   Text="Paste the YAML block printed by 'openme add', or drag a .yaml config file onto the text area."
                   Margin="0,0,0,12"/>

        <!-- Footer buttons -->
        <Border DockPanel.Dock="Bottom"
                BorderBrush="#DDDDDD" BorderThickness="0,1,0,0"
                Padding="0,12,0,0" Margin="0,12,0,0">
            <DockPanel LastChildFill="False">
                <Button DockPanel.Dock="Left"
                        Content="Paste from Clipboard"
                        Click="PasteButton_Click"
                        Style="{StaticResource SecondaryButton}"/>
                <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                    <Button Content="Parse" Width="70" Margin="0,0,8,0"
                            Click="ParseButton_Click"
                            Style="{StaticResource SecondaryButton}"/>
                    <Button Content="Import" Width="80"
                            Click="ImportButton_Click"
                            Style="{StaticResource PrimaryButton}"/>
                </StackPanel>
            </DockPanel>
        </Border>

        <!-- Success banner -->
        <Border DockPanel.Dock="Bottom"
                BorderBrush="#5B8C5A" BorderThickness="1" CornerRadius="4"
                Background="#DFF0D8" Padding="10,6" Margin="0,8,0,0"
                Visibility="{Binding ImportDone, Converter={StaticResource BoolToVisibility}}">
            <TextBlock Text="âœ“ Profiles imported successfully."
                       Foreground="#2A5A2A" FontSize="12"/>
        </Border>

        <!-- Error banner -->
        <Border DockPanel.Dock="Bottom"
                BorderBrush="#D13438" BorderThickness="1" CornerRadius="4"
                Background="#FDE7E9" Padding="10,6" Margin="0,8,0,0"
                Visibility="{Binding HasError, Converter={StaticResource BoolToVisibility}}">
            <TextBlock Text="{Binding ParseError}"
                       Foreground="#9B0C10" FontSize="12" TextWrapping="Wrap"/>
        </Border>

        <!-- Preview: will-import list -->
        <Border DockPanel.Dock="Bottom"
                BorderBrush="#5B8C5A" BorderThickness="1" CornerRadius="4"
                Background="#F0FAF0" Padding="10,6" Margin="0,8,0,0"
                Visibility="{Binding HasProfiles, Converter={StaticResource BoolToVisibility}}">
            <StackPanel>
                <TextBlock Text="Will import:" FontSize="12" Foreground="#2A5A2A" Margin="0,0,0,4"/>
                <ItemsControl ItemsSource="{Binding ParsedNames}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <TextBlock FontSize="12"
                                       Foreground="#2A5A2A" Margin="8,1,0,1">
                                <TextBlock.Text>
                                    <Binding StringFormat="ðŸ”’ {0}"/>
                                </TextBlock.Text>
                            </TextBlock>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </Border>

        <!-- YAML text area with drag-drop -->
        <TextBox x:Name="YamlTextBox"
                 Text="{Binding YamlText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                 AcceptsReturn="True" AcceptsTab="True"
                 VerticalScrollBarVisibility="Auto"
                 HorizontalScrollBarVisibility="Auto"
                 FontFamily="Consolas" FontSize="12"
                 AllowDrop="True"
                 Drop="YamlTextBox_Drop"
                 DragOver="YamlTextBox_DragOver"
                 VerticalAlignment="Stretch"/>
    </DockPanel>
</Window>
